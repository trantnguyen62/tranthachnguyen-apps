# ============ DATABASE ============

# PostgreSQL connection string
# For local development with Docker Compose:
DATABASE_URL="postgresql://cloudify:cloudify123@localhost:5432/cloudify"
# For Docker container (postgres is the service name):
# DATABASE_URL="postgresql://cloudify:cloudify123@postgres:5432/cloudify"

# ============ AUTHENTICATION ============

# JWT Secret for session tokens (minimum 32 characters)
# Generate: openssl rand -base64 32
JWT_SECRET="your-super-secret-jwt-key-at-least-32-characters-long"

# NextAuth Configuration
# Generate: openssl rand -base64 32
AUTH_SECRET="your-nextauth-secret-at-least-32-characters-long"
AUTH_URL="http://localhost:3000"

# Admin emails (comma-separated list of emails that get admin access)
# ADMIN_EMAILS="admin@example.com,dev@example.com"

# ============ GITHUB INTEGRATION ============

# GitHub App (for deployments, webhooks, and repo access)
# Create at https://github.com/settings/apps
# GITHUB_APP_ID="your-github-app-id"
# GITHUB_APP_PRIVATE_KEY="-----BEGIN RSA PRIVATE KEY-----\n...\n-----END RSA PRIVATE KEY-----"
# GitHub Personal Access Token (for detect-framework and detect-monorepo)
# GITHUB_TOKEN="ghp_your-personal-access-token"

# GitHub Webhook Secret (for verifying webhook payloads)
# Generate: openssl rand -hex 32
GITHUB_WEBHOOK_SECRET="your-github-webhook-secret"

# ============ BUILD PIPELINE ============

# Build artifact and repo directories
BUILDS_DIR="/data/builds"
REPOS_DIR="/data/repos"

# Build isolation mode
# Set to "false" when running inside a container without Docker-in-Docker
USE_DOCKER_ISOLATION="true"

# Use K3s for builds instead of local Docker
# USE_K3S_BUILDS="false"

# Base domain for deployed project sites
BASE_DOMAIN="tranthachnguyen.com"

# Preview deployment base URL
# PREVIEW_BASE_URL="https://preview.cloudify.tranthachnguyen.com"

# ============ NOTIFICATIONS ============

# Email Provider - Resend (recommended)
# Get your API key at https://resend.com
RESEND_API_KEY="re_your-resend-api-key"

# Email Provider - SendGrid (alternative)
# Get your API key at https://sendgrid.com
# SENDGRID_API_KEY="SG.your-sendgrid-api-key"

# Default sender email
EMAIL_FROM="Cloudify <notifications@tranthachnguyen.com>"

# Slack Integration
# Create a Slack App at https://api.slack.com/apps
# Required scopes: chat:write, chat:write.public
SLACK_BOT_TOKEN="xoxb-your-slack-bot-token"

# Discord Integration (configured per-project via webhook URLs)
# No global config needed - users add webhook URLs in project settings

# ============ ERROR TRACKING & MONITORING ============

# Sentry Error Tracking
# Get your DSN at https://sentry.io
SENTRY_DSN="https://your-public-key@sentry.io/project-id"

# Sentry API (for releases and deployments)
SENTRY_ORG="your-sentry-org"
SENTRY_AUTH_TOKEN="your-sentry-auth-token"

# Datadog Metrics & Monitoring
# Get your API keys at https://app.datadoghq.com/organization-settings/api-keys
DATADOG_API_KEY="your-datadog-api-key"
DATADOG_APP_KEY="your-datadog-app-key"
# Use datadoghq.eu for EU, datadoghq.com for US
DATADOG_SITE="datadoghq.com"

# Metrics endpoint authentication token
# METRICS_AUTH_TOKEN="your-metrics-auth-token"

# ============ STRIPE BILLING ============

# Stripe API Keys (https://dashboard.stripe.com/apikeys)
STRIPE_SECRET_KEY="sk_test_your-stripe-secret-key"
# STRIPE_PUBLISHABLE_KEY="pk_test_your-stripe-publishable-key"

# Stripe Webhook Secret (https://dashboard.stripe.com/webhooks)
STRIPE_WEBHOOK_SECRET="whsec_your-webhook-secret"

# Stripe Price IDs (create in Stripe Dashboard > Products)
STRIPE_PRO_MONTHLY_PRICE_ID="price_your-pro-monthly-price-id"
STRIPE_PRO_YEARLY_PRICE_ID="price_your-pro-yearly-price-id"
STRIPE_TEAM_MONTHLY_PRICE_ID="price_your-team-monthly-price-id"
STRIPE_TEAM_YEARLY_PRICE_ID="price_your-team-yearly-price-id"

# ============ CLOUDFLARE INTEGRATION ============

# Cloudflare API Token (recommended)
# Create at https://dash.cloudflare.com/profile/api-tokens
# Required permissions: Zone:DNS:Edit, Zone:Zone:Read
CLOUDFLARE_API_TOKEN="your-cloudflare-api-token"

# Cloudflare Zone ID (optional - auto-detected from domain if not set)
# Find at: Cloudflare Dashboard > Your Site > Overview (right sidebar)
# CLOUDFLARE_ZONE_ID="your-zone-id"

# Cloudflare Tunnel ID (for routing traffic to deployed sites)
# CLOUDFLARE_TUNNEL_ID="your-tunnel-id"

# Cloudflare Account ID (for Workers and other account-level APIs)
# CLOUDFLARE_ACCOUNT_ID="your-account-id"

# Alternative: Global API Key (not recommended, use API Token instead)
# CLOUDFLARE_EMAIL="your-email@example.com"
# CLOUDFLARE_API_KEY="your-global-api-key"

# ============ SSL / CERTIFICATE MANAGEMENT ============

# ACME/Let's Encrypt Configuration
# Email for Let's Encrypt account and certificate expiry notifications
ACME_EMAIL="admin@tranthachnguyen.com"

# Let's Encrypt environment: "production" or "staging"
# Use "staging" for testing to avoid rate limits
LETSENCRYPT_ENV="production"

# Certificate renewal threshold (days before expiry to renew)
CERTIFICATE_EXPIRY_THRESHOLD="30"

# SSL certificates directory
SSL_CERTS_DIR="/etc/letsencrypt/live"

# Certbot webroot for HTTP-01 challenges
CERTBOT_WEBROOT="/var/www/certbot"

# Use our ACME client (true) or legacy certbot CLI (false)
# ACME client supports DNS-01 challenges via Cloudflare
USE_ACME_CLIENT="true"

# ============ INFRASTRUCTURE ============

# Cloudify server IP (for DNS A records)
CLOUDIFY_SERVER_IP="192.168.0.203"

# MinIO Credentials (required for Docker Compose)
# Used by both the app and the MinIO/minio-init containers
MINIO_ACCESS_KEY="your-minio-access-key"
MINIO_SECRET_KEY="your-minio-secret-key"

# Redis URL (used for rate limiting, caching, and cron job queues)
# For local development with Docker Compose:
REDIS_URL="redis://localhost:6379"
# For Docker container:
# REDIS_URL="redis://redis:6379"

# ============ APPLICATION ============

# App version (used for Sentry releases, metrics tags)
APP_VERSION="1.0.0"

# Public app URL (used for notification links, analytics SDK)
NEXT_PUBLIC_APP_URL="https://cloudify.tranthachnguyen.com"

# Logging configuration
# LOG_LEVEL="info"  # debug, info, warn, error
# SERVICE_NAME="cloudify"
