@import "tailwindcss";

/* ==========================================================================
   Apple Design System - Cloudify
   Typography, Colors, Spacing, Elevation, Motion, Glass, Focus
   ========================================================================== */

/* --------------------------------------------------------------------------
   1. CSS Custom Properties (Design Tokens)
   -------------------------------------------------------------------------- */

:root {
  /* --- Typography Scale (1.200 Minor Third ratio) --- */
  --text-caption:      11px;
  --text-footnote:     13px;
  --text-body:         15px;
  --text-callout:      16px;
  --text-headline:     17px;
  --text-title-3:      20px;
  --text-title-2:      24px;
  --text-title-1:      28px;
  --text-large-title:  34px;

  /* Letter spacing */
  --tracking-tight:    -0.022em;
  --tracking-normal:   0;
  --tracking-wide:     0.02em;
  --tracking-widest:   0.06em;

  /* Line height */
  --leading-tight:     1.2;
  --leading-normal:    1.5;
  --leading-relaxed:   1.6;

  /* Font weights (only 4) */
  --weight-regular:    400;
  --weight-medium:     500;
  --weight-semibold:   600;
  --weight-bold:       700;

  /* --- Surfaces (5 elevation levels) --- */
  --surface-primary:   #FFFFFF;
  --surface-secondary: #F5F5F7;
  --surface-tertiary:  #E8E8ED;
  --surface-elevated:  #FFFFFF;
  --surface-recessed:  #F0F0F2;

  /* --- Text (4 levels) --- */
  --text-primary:      #1D1D1F;
  --text-secondary:    #6E6E73;
  --text-tertiary:     #86868B;
  --text-quaternary:   #AEAEB2;

  /* --- Accent (Apple Blue, 5 shades) --- */
  --accent:            #0071E3;
  --accent-hover:      #0077ED;
  --accent-active:     #006EDB;
  --accent-subtle:     rgba(0, 113, 227, 0.08);
  --accent-muted:      rgba(0, 113, 227, 0.16);

  /* --- Semantic status colors --- */
  --success:           #34C759;
  --success-subtle:    rgba(52, 199, 89, 0.08);
  --warning:           #FF9F0A;
  --warning-subtle:    rgba(255, 159, 10, 0.08);
  --error:             #FF3B30;
  --error-subtle:      rgba(255, 59, 48, 0.08);

  /* --- Borders (3 levels) --- */
  --border-primary:    rgba(0, 0, 0, 0.08);
  --border-secondary:  rgba(0, 0, 0, 0.04);
  --border-focused:    var(--accent);

  /* --- Separators --- */
  --separator:         rgba(0, 0, 0, 0.06);
  --separator-opaque:  #C6C6C8;

  /* --- Spacing (8px base grid) --- */
  --space-1:   4px;
  --space-2:   8px;
  --space-3:   12px;
  --space-4:   16px;
  --space-5:   24px;
  --space-6:   32px;
  --space-7:   48px;
  --space-8:   64px;

  /* --- Border Radius --- */
  --radius-sm:   6px;
  --radius-md:   10px;
  --radius-lg:   14px;
  --radius-full: 9999px;

  /* --- Shadows / Elevation --- */
  --shadow-inset: inset 0 1px 2px rgba(0, 0, 0, 0.06);
  --shadow-sm:    0 1px 2px rgba(0, 0, 0, 0.04),
                  0 1px 3px rgba(0, 0, 0, 0.02);
  --shadow-md:    0 4px 12px rgba(0, 0, 0, 0.06),
                  0 1px 3px rgba(0, 0, 0, 0.04);
  --shadow-lg:    0 8px 32px rgba(0, 0, 0, 0.10),
                  0 2px 8px rgba(0, 0, 0, 0.04);
  --shadow-xl:    0 16px 48px rgba(0, 0, 0, 0.16),
                  0 4px 16px rgba(0, 0, 0, 0.06);

  /* --- Motion --- */
  --duration-instant:  100ms;
  --duration-fast:     200ms;
  --duration-normal:   300ms;
  --duration-slow:     500ms;

  --ease-default:      cubic-bezier(0.25, 0.1, 0.25, 1.0);
  --ease-spring:       cubic-bezier(0.34, 1.56, 0.64, 1.0);
  --ease-decelerate:   cubic-bezier(0.0, 0.0, 0.2, 1.0);

  /* --- Legacy mappings (backwards compatibility) --- */
  --background: var(--surface-primary);
  --foreground: var(--text-primary);
  --card: var(--surface-elevated);
  --card-foreground: var(--text-primary);
  --popover: var(--surface-elevated);
  --popover-foreground: var(--text-primary);
  --primary: var(--accent);
  --primary-foreground: #FFFFFF;
  --secondary: var(--surface-secondary);
  --secondary-foreground: var(--text-primary);
  --muted: var(--surface-secondary);
  --muted-foreground: var(--text-secondary);
  --accent-color: var(--accent);
  --accent-foreground: #FFFFFF;
  --destructive: var(--error);
  --destructive-foreground: #FFFFFF;
  --border: var(--border-primary);
  --input: var(--border-primary);
  --ring: var(--accent);
  --radius: var(--radius-sm);
  --link: var(--accent);
  --error-fg: var(--error);
}

.dark {
  /* --- Surfaces (NOT pure black) --- */
  --surface-primary:   #1C1C1E;
  --surface-secondary: #2C2C2E;
  --surface-tertiary:  #3A3A3C;
  --surface-elevated:  #2C2C2E;
  --surface-recessed:  #141416;

  /* --- Text --- */
  --text-primary:      #F5F5F7;
  --text-secondary:    #98989D;
  --text-tertiary:     #6E6E73;
  --text-quaternary:   #48484A;

  /* --- Accent (brighter for dark mode contrast) --- */
  --accent:            #0A84FF;
  --accent-hover:      #409CFF;
  --accent-active:     #0071E3;
  --accent-subtle:     rgba(10, 132, 255, 0.12);
  --accent-muted:      rgba(10, 132, 255, 0.20);

  /* --- Semantic --- */
  --success:           #30D158;
  --success-subtle:    rgba(48, 209, 88, 0.12);
  --warning:           #FFD60A;
  --warning-subtle:    rgba(255, 214, 10, 0.12);
  --error:             #FF453A;
  --error-subtle:      rgba(255, 69, 58, 0.12);

  /* --- Borders --- */
  --border-primary:    rgba(255, 255, 255, 0.10);
  --border-secondary:  rgba(255, 255, 255, 0.05);
  --border-focused:    var(--accent);

  /* --- Separators --- */
  --separator:         rgba(255, 255, 255, 0.08);
  --separator-opaque:  #38383A;

  /* --- Shadows (increased opacity for dark mode) --- */
  --shadow-sm:    0 1px 2px rgba(0, 0, 0, 0.20),
                  0 1px 3px rgba(0, 0, 0, 0.12);
  --shadow-md:    0 4px 12px rgba(0, 0, 0, 0.28),
                  0 1px 3px rgba(0, 0, 0, 0.16);
  --shadow-lg:    0 8px 32px rgba(0, 0, 0, 0.40),
                  0 2px 8px rgba(0, 0, 0, 0.20);
  --shadow-xl:    0 16px 48px rgba(0, 0, 0, 0.48),
                  0 4px 16px rgba(0, 0, 0, 0.24);

  /* --- Legacy mappings --- */
  --background: var(--surface-primary);
  --foreground: var(--text-primary);
  --card: var(--surface-elevated);
  --card-foreground: var(--text-primary);
  --popover: var(--surface-elevated);
  --popover-foreground: var(--text-primary);
  --primary: var(--accent);
  --primary-foreground: #FFFFFF;
  --secondary: var(--surface-secondary);
  --secondary-foreground: var(--text-primary);
  --muted: var(--surface-secondary);
  --muted-foreground: var(--text-secondary);
  --accent-color: var(--accent);
  --accent-foreground: #FFFFFF;
  --destructive: var(--error);
  --destructive-foreground: #FFFFFF;
  --border: var(--border-primary);
  --input: var(--border-primary);
  --ring: var(--accent);
}

/* --------------------------------------------------------------------------
   2. Tailwind v4 Theme Extension
   -------------------------------------------------------------------------- */

@theme inline {
  /* Colors - mapped to CSS variables */
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);
  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);
  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);
  --color-secondary: var(--secondary);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground);
  --color-accent: var(--accent-color);
  --color-accent-foreground: var(--accent-foreground);
  --color-destructive: var(--destructive);
  --color-destructive-foreground: var(--destructive-foreground);
  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);
  --color-link: var(--link);
  --color-success: var(--success);
  --color-warning: var(--warning);
  --color-error-fg: var(--error-fg);

  /* Apple design system colors */
  --color-surface-primary: var(--surface-primary);
  --color-surface-secondary: var(--surface-secondary);
  --color-surface-tertiary: var(--surface-tertiary);
  --color-surface-elevated: var(--surface-elevated);
  --color-surface-recessed: var(--surface-recessed);

  --color-text-primary: var(--text-primary);
  --color-text-secondary: var(--text-secondary);
  --color-text-tertiary: var(--text-tertiary);
  --color-text-quaternary: var(--text-quaternary);

  --color-apple-accent: var(--accent);
  --color-apple-accent-hover: var(--accent-hover);
  --color-apple-accent-active: var(--accent-active);
  --color-accent-subtle: var(--accent-subtle);
  --color-accent-muted: var(--accent-muted);

  --color-success-subtle: var(--success-subtle);
  --color-warning-subtle: var(--warning-subtle);
  --color-error-subtle: var(--error-subtle);

  --color-border-primary: var(--border-primary);
  --color-border-secondary: var(--border-secondary);
  --color-border-focused: var(--border-focused);
  --color-separator: var(--separator);
  --color-separator-opaque: var(--separator-opaque);

  /* Radius */
  --radius: var(--radius-sm);
  --radius-sm: var(--radius-sm);
  --radius-md: var(--radius-md);
  --radius-lg: var(--radius-lg);
  --radius-full: var(--radius-full);

  /* Shadows */
  --shadow-inset: var(--shadow-inset);
  --shadow-sm: var(--shadow-sm);
  --shadow-md: var(--shadow-md);
  --shadow-lg: var(--shadow-lg);
  --shadow-xl: var(--shadow-xl);

  /* Fonts */
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);

  /* Typography scale */
  --font-size-caption: var(--text-caption);
  --font-size-caption--line-height: var(--leading-normal);
  --font-size-footnote: var(--text-footnote);
  --font-size-footnote--line-height: var(--leading-normal);
  --font-size-body: var(--text-body);
  --font-size-body--line-height: var(--leading-normal);
  --font-size-callout: var(--text-callout);
  --font-size-callout--line-height: var(--leading-normal);
  --font-size-headline: var(--text-headline);
  --font-size-headline--line-height: var(--leading-tight);
  --font-size-title-3: var(--text-title-3);
  --font-size-title-3--line-height: var(--leading-tight);
  --font-size-title-2: var(--text-title-2);
  --font-size-title-2--line-height: var(--leading-tight);
  --font-size-title-1: var(--text-title-1);
  --font-size-title-1--line-height: var(--leading-tight);
  --font-size-large-title: var(--text-large-title);
  --font-size-large-title--line-height: var(--leading-tight);

  /* Spacing */
  --spacing-1: var(--space-1);
  --spacing-2: var(--space-2);
  --spacing-3: var(--space-3);
  --spacing-4: var(--space-4);
  --spacing-5: var(--space-5);
  --spacing-6: var(--space-6);
  --spacing-7: var(--space-7);
  --spacing-8: var(--space-8);

  /* Animation durations */
  --animate-duration-instant: var(--duration-instant);
  --animate-duration-fast: var(--duration-fast);
  --animate-duration-normal: var(--duration-normal);
  --animate-duration-slow: var(--duration-slow);

  /* Animation easings */
  --ease-default: var(--ease-default);
  --ease-spring: var(--ease-spring);
  --ease-decelerate: var(--ease-decelerate);

  /* Backdrop blur */
  --blur-material-thin: 8px;
  --blur-material-regular: 16px;
  --blur-material-thick: 24px;
}

/* --------------------------------------------------------------------------
   3. Base Styles
   -------------------------------------------------------------------------- */

* {
  border-color: var(--border);
}

body {
  background: var(--background);
  color: var(--foreground);
  font-size: var(--text-body);
  line-height: var(--leading-normal);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* --------------------------------------------------------------------------
   4. Focus Ring (beautiful, not bolted on)
   -------------------------------------------------------------------------- */

:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px var(--accent-subtle), 0 0 0 1px var(--accent);
  border-radius: var(--radius-sm);
}

/* Inputs and buttons get their own focus handling via classes */
input:focus-visible,
textarea:focus-visible,
select:focus-visible,
button:focus-visible,
[role="tab"]:focus-visible,
[role="button"]:focus-visible {
  box-shadow: none;
}

/* --------------------------------------------------------------------------
   5. Scrollbar Styling
   -------------------------------------------------------------------------- */

::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--text-quaternary);
  border-radius: var(--radius-full);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--text-tertiary);
}

/* Hide scrollbar when not hovering (Apple-style) */
::-webkit-scrollbar-thumb {
  transition: background var(--duration-fast) var(--ease-default);
}

html {
  scroll-behavior: smooth;
  scrollbar-gutter: stable;
}

/* --------------------------------------------------------------------------
   6. Selection
   -------------------------------------------------------------------------- */

::selection {
  background: var(--accent-muted);
  color: var(--text-primary);
}

/* --------------------------------------------------------------------------
   7. Animation Keyframes
   -------------------------------------------------------------------------- */

@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fade-out {
  from { opacity: 1; }
  to { opacity: 0; }
}

@keyframes slide-up {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slide-down {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes scale-out {
  from {
    opacity: 1;
    transform: scale(1);
  }
  to {
    opacity: 0;
    transform: scale(0.95);
  }
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

/* --------------------------------------------------------------------------
   8. Utility Classes
   -------------------------------------------------------------------------- */

/* Animation classes */
.animate-in {
  animation: fade-in var(--duration-fast) var(--ease-default);
}

.animate-out {
  animation: fade-out var(--duration-fast) var(--ease-default);
}

.slide-in-from-top-2 {
  animation: slide-down var(--duration-fast) var(--ease-decelerate);
}

.slide-in-from-bottom-2 {
  animation: slide-up var(--duration-fast) var(--ease-decelerate);
}

/* Page transition */
@keyframes page-enter {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.page-enter {
  animation: page-enter var(--duration-normal) var(--ease-decelerate) forwards;
}

.page-visible {
  opacity: 1;
  transform: translateY(0);
}

/* Card enter animation (stagger with --stagger-index) */
@keyframes card-enter {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-card-enter {
  animation: card-enter var(--duration-normal) var(--ease-decelerate) forwards;
}

/* Hover lift for interactive cards */
.hover-lift {
  transition: transform var(--duration-fast) var(--ease-default),
              box-shadow var(--duration-fast) var(--ease-default);
}

.hover-lift:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-md);
}

/* Glass / Material effects */
.glass,
.material-thin {
  backdrop-filter: saturate(180%) blur(8px);
  -webkit-backdrop-filter: saturate(180%) blur(8px);
  background: rgba(255, 255, 255, 0.72);
}

.material-regular {
  backdrop-filter: saturate(180%) blur(16px);
  -webkit-backdrop-filter: saturate(180%) blur(16px);
  background: rgba(255, 255, 255, 0.78);
}

.material-thick {
  backdrop-filter: saturate(180%) blur(24px);
  -webkit-backdrop-filter: saturate(180%) blur(24px);
  background: rgba(255, 255, 255, 0.85);
}

.dark .glass,
.dark .material-thin {
  background: rgba(28, 28, 30, 0.72);
}

.dark .material-regular {
  background: rgba(28, 28, 30, 0.78);
}

.dark .material-thick {
  background: rgba(28, 28, 30, 0.85);
}

/* Gradient text */
.gradient-text {
  background: linear-gradient(180deg, var(--text-primary), var(--text-secondary));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
